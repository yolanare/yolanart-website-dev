$mini-mobile: 800px;
$mini-tablet: 950px;
$breakpoint--recents: 900px;
$breakpoint--qvp: 1000px;

@import './assets/fonts.scss';
@import './assets/default-custom.scss';
@import './assets/overlayscrollbars.scss';
@import './assets/error-frame.scss';
@import './assets/loading-screen.scss';

html {
    --y-white-v: 236, 239, 242;
    --y-black-v: 15, 15, 15;
    --y-white: rgb(var(--y-white-v));
    --y-black: rgb(var(--y-black-v));

    &[theme="light"], & {
        --bw-theme: #ffffff;
        --y-txt-main-v: var(--y-black-v);
        --y-txt-secondary: rgb(37, 35, 36);
        --y-fill-main-v: var(--y-white-v);
        --y-fill-secondary: rgb(250, 253, 255);
        --y-accent-neutral: hsl(345, 6%, 65%);

        --global-type-weight: 500;
        --global-letter-spacing: -0.1px;
    }
    &[theme="dark"] {
        --bw-theme: #000000;
        --y-txt-main-v: var(--y-white-v);
        --y-txt-secondary: rgb(250, 253, 255);
        --y-fill-main-v: var(--y-black-v);
        --y-fill-secondary: rgb(37, 35, 36);
        --y-accent-neutral: hsl(345, 6%, 25%);

        --global-type-weight: 425;
        --global-letter-spacing: 0px;
    }

    --y-txt-main: rgb(var(--y-txt-main-v));
    --y-fill-main: rgb(var(--y-fill-main-v));
    --y-accent-red-v: 218, 43, 73;
    --y-accent-red: rgb(var(--y-accent-red-v));
    --y-neutral: hsl(345, 6%, 25%);
}
:root {
    --p-needbg-default: var(--y-fill-main);

    --title-weight: 650;
    --title-lineH: 1;

    --pill_bg: var(var(--y-fill-secondary));
    --global-border-radius: 0.65rem;

    --plist-p: clamp(2.5rem, 3vw, 6rem);
    --plist-p2: calc(var(--plist-p) * 2);
    --plist-ptop: 1rem;
    --plist-pbottom: 10rem;

    --scroll-quick-tr: 0.25s cubic-bezier(0.05, 1, 0.3, 1);
    --scroll-ice-tr: 1s cubic-bezier(0, 1, 0.5, 1);
    --scroll-plist: var(--scroll-ice-tr);


    @media (max-width: $mini-tablet) {
        --title-lineH: 1.1;
    }
}
html {
    &.isTouch {
        --scroll-plist: none; // "smooth" scrolling is fucked up with touch scroll
        --plist-ptop: 3rem;
    }
}

::selection {
    color: white;
    background-color: rgba(var(--y-accent-red-v), 1);
    //background-color: var(--y-fill-main);
}
html {
    overflow: hidden;
    width: 100vw;
    height: 100vh;

    --scroll-pos-y: calc(-3 * var(--ice-scroll-offset, 0)); // for performance reasons, it moves at same speed anyway
    // but since ice scrolling is disabled on mobile, it will be overriden by the real one
}
body {
    margin: 0;
    background-color: var(--y-fill-main) !important;
    color: var(--y-txt-main);
    font-family: "Montserrat", "Plus Jakarta Sans", sans-serif;
    font-size: clamp(8px, 0.85vw, 10px);
    line-height: 1;
    -webkit-tap-highlight-color: transparent;
    overflow-x: hidden;
}

p {
    margin: 0;
}

.dummy {
    position: fixed !important;
    top: -99vh;
    left: -99vw;
    overflow: hidden;
    opacity: 0 !important;
    transition: none;
    pointer-events: none !important;
    user-select: none !important;
}

// MIXINS
@mixin nice-corners {
    overflow: hidden;
    border-radius: var(--global-border-radius);
}

// HIERARCHY
.content-sections#landing { z-index: 0; }
.content-sections#recent-projects { z-index: 0; }
.content-sections#filters { z-index: 0; }
.content-sections#contact { z-index: 0; }
nav.menu { z-index: 90; } // ontop page main content, under everything else
[boom-main-container] { z-index: 89; } // under nav
[bubble-tips-container] { z-index: 900; } // ontop everything
[video-popups-container] { z-index: 500; } // ontop everything, under other tools
[project-files-container] { z-index: 100; } // ontop page main content

// NAV
.menu-button {

}


nav.menu {
    position: fixed;
    width: var(--plist-p);
    min-width: 3rem;
    top: 0;
    right: 0;
    font-size: 1.5em;
    user-select: none;
    pointer-events: none;

    & > * {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        width: 100%;
        height: var(--plist-p);
        min-height: 3rem;
        top: 0;
        right: 1px;
        font-weight: var(--global-type-weight);
        letter-spacing: var(--global-letter-spacing);
        outline: var(--y-txt-main) 1px solid;
        outline-offset: -1px;
        background-color: transparent;
        cursor: pointer;
        pointer-events: all;
    }
}

// LANGUAGE BUTTONS
.change-language-button {
    display: flex;
    align-items: center;
    justify-content: center;
    transform: scaleX(1.1);

    span {
        display: block;
        text-align: center;
        font-family: "Chivo Mono", "Montserrat", sans-serif;
        font-size: 0.8em;
        font-weight: 200;
        line-height: 1;
        letter-spacing: -1px;
        color: var(--y-txt-main);
        transform: rotateZ(0.01deg) scale(1);
        transition: font-weight 0.6s cubic-bezier(0.1, 0.6, 0, 1),
                    color 0.5s ease,
                    transform 0.6s cubic-bezier(0.1, 0.6, 0, 1);
    }

    svg {
        position: absolute;
        width: 100%;
        height: 100%;
    }

    &:hover {
        span {
            font-weight: 700;
        }
    }
    &:active {
        span {
            color: var(--project-color-accent);
            transform: rotateZ(0.01deg) scale(0.9);
            transition: font-weight 0.2s cubic-bezier(0, 0.6, 0, 1),
                        color 0s,
                        transform 75ms cubic-bezier(0, 0.7, 0, 1);
        }
    }
}

// CONTENT
#content-container {
    position: absolute !important;
    width: 100%;
    height: 100%;
    overflow-y: visible;
    overflow-x: hidden;
}

.content-sections {
    margin: 0;
    position: relative;
    width: 100%;
    min-height: 100vh;
}
//.content-sections#landing {
//    background-color: rgba(255,0,0,0.1);
//}
//.content-sections#recent-projects {
//    background-color: rgba(0,255,0,0.1);
//}
//.content-sections#filters {
//    background-color: rgba(0,0,255,0.1);
//}
.content-sections#contact {
    // background-color: rgba(0,0,0,1);
    min-height: clamp(5rem, 10vw, 15rem);
}
.projects-list > * {
    min-height: 95vh;
}
// TODO contact section

[class*="title-"] {
    display: inline-block;
    font-weight: var(--title-weight);
    line-height: var(--title-lineH);
    user-select: none;
    pointer-events: none;
}

html[theme="light"] [invert="white"],
html[theme="dark"] [invert="black"],
.invert {
    filter: invert(1) hue-rotate(180deg);
}

// HIGHLIGHT WORDS
// all the text should be in a <p> and the highlights ones in <h>
[highlight-words="true"] {
    h {
        --fill: var(--bw-theme, #ffffff);
        --fill: var(--y-fill-main);
        --outline: var(--y-accent-red);
        --bg-scroll-speed: 1;
        // &:nth-child(2) { --bg-scroll-speed: 0.25; }
        // &:nth-child(3) { --bg-scroll-speed: 0.15; }
        // &:nth-child(4) { --bg-scroll-speed: 0.4; }

        z-index: -1;
        position: relative;
        // display: inline-table;
        // height: 1em;
        padding: 0 0.15em;
        margin: 0 -0.15em;
        box-decoration-break: clone;
        font-weight: inherit;
        color: #ffffff;
        background-color: var(--y-accent-red);
        background-image: url("./assets/medias/highlight-words-pattern.png");
        background-size: 200%;
        background-position-x: calc(var(--scroll-pos-y) * var(--bg-scroll-speed));
        // background-position-y: calc(var(--scroll-pos-y)*0.5*var(--bg-scroll-speed));

        @media (max-width: $mini-tablet) {
            background-size: 500%;
        }
        .isTouch & {
            background-image: none;
        }

        & {
            background-clip: text;
            color: transparent;
            background-color: var(--fill);
            $stroke-size-p:  1px;
            $stroke-size-n: -1px;
            filter: drop-shadow($stroke-size-n $stroke-size-n 0px var(--outline))
                    drop-shadow($stroke-size-n $stroke-size-p 0px var(--outline))
                    drop-shadow($stroke-size-p $stroke-size-n 0px var(--outline))
                    drop-shadow($stroke-size-p $stroke-size-p 0px var(--outline));
        }
    }
}


// FILTER PILLS
// defaults
.prj-pill {
    --pill-c: var(--y-txt-main);
    --pill-bg: var(--y-fill-secondary);
    --pill-bg-rgb: var(--y-accent-red-v);
}

[filter-id="comm"] { --pill-bg-rgb: 255, 32, 32; }
[filter-id="compo"] { --pill-bg-rgb: 255, 85, 68; }
[filter-id="layout"] { --pill-bg-rgb: 255, 85, 68; }
[filter-id="motion"] { --pill-bg-rgb: 34, 172, 255; }
[filter-id="photo"] { --pill-bg-rgb: 53, 141, 255; }
[filter-id="3D"] { --pill-bg-rgb: 59, 117, 255; }
[filter-id="illustration"] { --pill-bg-rgb: 39, 93, 255; }
[filter-id="vector"] { --pill-bg-rgb: 34, 236, 122; }
[filter-id="type"] { --pill-bg-rgb: 0, 230, 165; }
[filter-id="branding"] { --pill-bg-rgb: 236, 176, 34; }
[filter-id="experiment"] { --pill-bg-rgb: 191, 35, 152; }

[filter-id="ad"] { --pill-bg-rgb: 255, 189, 64; }
[filter-id="print"] { --pill-bg-rgb: 255, 155, 83; }


.prj-pill {
    overflow: hidden;
    flex-shrink: 0;
    display: inline-flex;
    flex-direction: row;
    align-items: center;
    vertical-align: middle;
    position: relative;

    --margin-space-add: 0em;
    --margin-sides-add: 0em;
    margin: calc(0.3em + var(--margin-sides-add)) 0;
    margin-right: calc(0.45em + var(--margin-sides-add));
    &:last-child { margin-right: 0; }
    padding: 0.3em 0.75em;

    @media (max-width: $mini-tablet) {
        padding: 0.325em 0.8em;
    }
    @media (max-width: $mini-mobile) {
        padding: 0.375em 0.9em;
    }

    border-radius: 99em;
    font-size: 1em;
    font-weight: var(--global-type-weight);
    letter-spacing: calc(var(--global-letter-spacing) - 0.25px);
    text-decoration: none;
    white-space: nowrap;

    color: var(--pill-c);
    background-color: var(--pill-bg);
    --bg-hover-v: var(--y-accent-red-v);
    html[theme="dark"] & { --bg-hover-v: var(--y-txt-main-v); }

    outline: 0px solid transparent;
    --outline-weight: 2px;
    transform: rotateZ(0.01deg) scale(1);

    html.isSafari & {
        outline: none !important;
        border: var(--outline-weight) solid transparent;

        &[state="true"] {
            border: var(--outline-weight) solid rgba(var(--pill-bg-rgb), 0.85);
        }
    }

    cursor: pointer;
    user-select: none;

    --tr-color-normal: color 0.7s cubic-bezier(0.2, 0.6, 0, 1);
    --tr-color-hover: color 0.6s cubic-bezier(0.1, 0.6, 0, 1);

    --tr-bg-color-normal: background-color 1s cubic-bezier(0.3, 0.5, 0, 1);
    --tr-bg-color-hover: background-color 0.6s cubic-bezier(0.05, 0.7, 0, 1);

    --tr-outline-normal: outline 0.7s cubic-bezier(0.3, 0.65, 0, 1);
    --tr-outline-hover: outline 0.3s ease;

    --tr-transform-normal: transform 0.7s cubic-bezier(0.3, 0.7, 0, 1);
    --tr-transform-hover: transform 0.6s cubic-bezier(0.5, 0.7, 0, 1);
    --tr-transform-active: transform 85ms cubic-bezier(0, 0.6, 0, 1);

    transition: var(--tr-color-normal),
                var(--tr-bg-color-normal),
                var(--tr-outline-normal),
                var(--tr-transform-normal);

    &:hover, &[state="true"] {
            transition: var(--tr-color-hover),
                        var(--tr-bg-color-hover),
                        var(--tr-outline-hover),
                        var(--tr-transform-hover);
    }
    &[state="true"] {
        --tr-bg-color-hover: background-color 1s cubic-bezier(0.1, 0.7, 0, 1);
    }
    &:active {
        transform: rotateZ(0.01deg) scale(0.95);
        transition: var(--tr-color-hover),
                    var(--tr-bg-color-hover),
                    var(--tr-outline-hover),
                    var(--tr-transform-active);
    }

    > * {
        pointer-events: none;

        &:not(span):not(:last-child) {
            margin-right: 0.35em;
        }
    }

    > svg { // vector icons
        position: relative;
        bottom: 0.03em;
        width: 1em;
        height: 1em;
        fill: var(--pill-c);

        &.stroke {
            fill: none;
            stroke-width: 2;
            stroke: var(--pill-c);
        }
    }

    > img { // img icons
        width: 1em;
        height: 1em;
        object-fit: contain;
    }

    > span { // label
        white-space: nowrap;
        display: inline-block;
    }

    .cross {
        font-size: 0.65em;
        position: relative;
        top: 0em;
        margin-left: 0em;
        width: 0em;
        height: 1em;
        transform: scale(0);
        transform-origin: center;
        opacity: 0;
        transition: top 0.4s 0.1s ease,
                    width 0.4s 0.1s ease,
                    margin-left 0.4s 0.1s ease,
                    transform 1s cubic-bezier(0.3, 0.5, 0, 1),
                    opacity 0.3s ease;

        svg {
            position: absolute;
            width: 1em;
            height: 1em;
            bottom: 0em;
            fill: none;
            stroke-width: 5;
            stroke: var(--pill-c);
            overflow: visible;
        }
    }
    &[state="true"] {
        .cross {
            top: 0.035em;
            width: 1em;
            margin-left: 0.5em;
            transform: scale(1) rotate(1turn);
            opacity: 1;

            --tr-cross-transform: transform 0.7s 0.1s cubic-bezier(0.3, 0.7, 0, 1);
            transition: top 0.5s ease,
                        width 0.5s ease,
                        margin-left 0.5s ease,
                        var(--tr-cross-transform),
                        opacity 0.6s 0.1s ease;
        }
    }
    &:active {
        .cross {
            transform: scale(1) rotate(1.04turn);
            --tr-cross-transform: transform 0.15s ease;
        }
    }
}

.prj-pill.filter {
    background-color: rgba(var(--pill-bg-rgb), 0.3);
    --tr-outline-normal: outline 0s linear;
    --tr-outline-hover: outline 0s linear;

    &:hover, &[state="true"] {
        color: var(--y-txt-main);
        background-color: rgba(var(--pill-bg-rgb), 0.6);
        outline: 0px solid var(--y-txt-main);
    }
    &[state="true"] {
        background-color: transparent;
        outline: var(--outline-weight) solid rgba(var(--pill-bg-rgb), 0.85);
        --tr-outline-hover: outline 0s linear, outline-color 0.6s 0.1s ease;

        &:hover {
            background-color: rgba(var(--bg-hover-v), 0.15);
        }
    }
}
.prj-pill.date {
    background-color: transparent;
    outline: var(--outline-weight) solid var(--y-txt-main);

    & > svg {
        bottom: 0;
        transform: rotateZ(0deg);
        transition: transform 1.2s cubic-bezier(0.7, 0.8, 0, 1);
    }
    &[state="true"] > svg {
        transform: rotateZ(900deg);
    }
    &:hover {
        background-color: rgba(var(--bg-hover-v), 0.15);
    }
}

.prj-pill {
    &[context-id], &.desc-link {
        --accent: var(--y-accent-red);
        color: var(--y-txt-main);
        background-color: transparent;
        outline: var(--outline-weight) solid var(--accent);
        border-radius: 0.35em;

        &:hover, &[state="true"] {
            --accent: var(--y-accent-red);
            background-color: rgba(var(--bg-hover-v), 0.15);
            outline-color: var(--y-txt-main);
        }
    }
    &.desc-link {
        > * {
            white-space: initial;
            word-break: break-word;
        }

        &:hover {
            background-color: rgba(var(--bg-hover-v), 0.1);
        }

        svg {
            transform: scale(1.2);
            flex-shrink: 0;
        }
    }
}
html.isSafari .prj-pill:not(.filter) {
    border: var(--outline-weight) solid var(--accent, var(--y-txt-main));
}


.pattern-bg {
    z-index: -100;
    position: fixed;
    inset: 0;
    font-size: clamp(0.45rem, 0.65vw, 1rem);
    opacity: 0.375;
    html[theme="dark"] & { opacity: 0.3; }
    background-repeat: repeat;
    background-position: center;
    transition: opacity 0.4s ease,
                background-position 0s;
    pointer-events: none !important;
    user-select: none !important;
    // everything else is set by JS

    --speed-factor-apply : var(--speed-factor);

    @media (max-width: calc($mini-tablet * 1.5)) {
        background-size: calc(var(--size,0) * 1.15);
    }
    @media (max-width: calc($mini-tablet * 1.3)) {
        background-size: calc(var(--size,0) * 1.35);
    }
    @media (max-width: $mini-tablet) {
        background-size: calc(var(--size,0) * 1.25);
        --speed-factor-apply : calc(var(--speed-factor) * 3);
    }
    @media (max-width: calc($mini-mobile + ($mini-tablet - $mini-mobile) / 2)) {
        background-size: calc(var(--size,0) * 1.75);
    }
    @media (max-width: $mini-mobile) {
        background-size: calc(var(--size,0) * 2);
        --speed-factor-apply : calc(var(--speed-factor) * 4.25);
    }
    @media (max-width: calc($mini-mobile / 1.5)) {
        background-size: calc(var(--size,0) * 2.5);
    }

    background-size: var(--size, 0%);
    background-position: 0 calc(var(--start-y) - (var(--scroll-pos-y) * var(--speed-factor-apply)));
    // @media (max-width: $mini-mobile) {
    //     background-position-x: calc(var(--start-x) + (var(--scroll-pos-y) * (var(--speed-factor-apply) * 0.15)));
    // }
}


// BOOM
[boom-main-container], [boom-container] {
    position: fixed;
    width: 100vw;
    height: 100vh;
    top: 0;
    left: 0;
    user-select: none;
    pointer-events: none;
}

.boom {
    --boom-x: 50vw;
    --boom-y: 50vh;
    --boom-rotate: 0deg;
    left: var(--boom-x);
    top: var(--boom-y);
    transform: rotateZ(var(--boom-rotate));

    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    transition: 0s;

    .circle {
        --boom-fadeout-time: 1300ms;
        --boom-size: 0px;
        width: var(--boom-size);
        height: var(--boom-size);

        position: absolute;
        border-radius: 999vw;
        transition: 0s;

        // default values
        --tr-boom-grow: 1s cubic-bezier(0.375, 0.7, 0, 1);
        --tr-boom-color: 0.65s 0.125s cubic-bezier(0.5, 0.7, 0, 1);

        opacity: 0.3;
        background-color: var(--y-accent-red);
        &.final-style {
            background-color: var(--y-txt-main);

            transition: width var(--tr-boom-grow), height var(--tr-boom-grow),
                        opacity var(--boom-fadeout-time) ease-in-out,
                        background-color var(--tr-boom-color);
        }
    }

    &.languageButton {
        .circle {
            opacity: 0.25;
            background-color: var(--project-color-accent, var(--y-txt-main));
            --tr-boom-color: 1s cubic-bezier(0, 0.7, 0, 1);
            &.final-style {
                background-color: var(--project-color-accent, var(--y-txt-main));
            }
        }
    }
}


// BUBBLE TIPS
[bubble-tips-container] {
    position: fixed;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    pointer-events: none;
    user-select: none;
}

.bubble-tip {
    --bubble-offset: 3.5rem;
    --point-offset: -3rem;
    &.reverse {
        --bubble-offset: -3.5rem;
        --point-offset: 3rem;
    }

    position: fixed;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    font-size: 1.5rem;
    font-weight: 500;
    transform: translateY(var(--bubble-offset));
    transform-origin: center;
    opacity: 1;
    transition: 0s;

    & > * {
        transform: translate(-50%, -50%) scale(1);
        transform-origin: center;
    }

    .point {
        position: absolute;
        width: 0.75em;
        height: 0.75em;
        top: 0;
        left: 0;
        border-radius: 50%;
        transition: opacity 0.3s ease,
                    transform 0.45s cubic-bezier(0.4, 0.3, 0, 1);
    }

    .content {
        --delay: 0.15s;

        position: absolute;
        top: 0;
        left: 0;
        padding: 0.4em 1.15em;
        text-align: center;
        white-space: nowrap;
        transition: transform 0.8s var(--delay) cubic-bezier(0.4, 0.7, 0, 1),
                    transform-origin 0s;

        & > * {
            transform: scale(1);
            transition: transform 1.2s var(--delay) cubic-bezier(0.3, 0.7, 0, 1),
                        opacity 0.5s calc(var(--delay) + 0.175s) ease;
        }

        span {
            opacity: 1;
        }
        .bg {
            z-index: -1;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 9em;
        }
    }

    color: var(--y-fill-main);
    .point, .content .bg {
        background-color: var(--y-txt-main);
    }

    &.anim-pre {
        &, & * {
            transition: 0s !important;
        }
        .point {
            opacity: 0;
            transform: translate(-50%, var(--point-offset)) scale(0.35);
        }
        .content {
            transform: translate(-50%, -50%) scale(0, 0);

            & > * {
                transform: scaleX(0);
            }
            span {
                opacity: 0;
            }
        }
    }

    &.anim-clear {
        opacity: 0;
        transition: opacity 0.4s;

        .content {
            transform: translate(-50%, -50%) scale(0.9, 0.75);
            transition: transform 1s cubic-bezier(0.4, 0.6, 0, 1),
                        opacity 0.5s;
            span {
                opacity: 0;
                transition: opacity 0.3s 0.1s;
            }
        }
    }

    &.normal-scale {
        position: fixed !important;
        top: -100vh !important;
        left: -100vw !important;

        &, & * {
            transform: scale(1) !important;
            transition: 0s !important;
        }
    }
}


// CURSOR CROSS
.cursor-cross {
    left: var(--cursor-x);
    top: var(--cursor-y);

    position: fixed;
    transform: translate(-50%, -50%) scale(0);
    width: 3.3rem;
    height: 3.3rem;
    stroke: var(--y-white);
    stroke-width: 0;
    opacity: 0;
    transition: transform 0.6s cubic-bezier(0.2, 0.75, 0, 1),
                stroke-width 0.5s cubic-bezier(0.1, 0.6, 0, 1),
                opacity 0.4s;
    pointer-events: none;
    user-select: none;

    & svg,
    & svg > g {
        transform: rotateZ(0deg);
        transition: transform 0.2s linear;
    }

    @keyframes curClose-Spin {
        0% { transform: rotateZ(-180deg); }
        100% { transform: rotateZ(0deg); }
    }

    &.hover:not(.hidden) {
        stroke-width: 3.5;
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.325);
        transition: transform 0.4s cubic-bezier(0.5, 0.7, 0, 1),
                    stroke-width 0.1s ease,
                    opacity 0s;

        & svg > g {
            animation: curClose-Spin 0.4s cubic-bezier(0.25, 0.85, 0, 1);
            transform-origin: center;
        }
    }

    &.click {
        & svg {
            stroke-width: 6 !important;
            transform: scale(1.25);
            transition: transform 0.4s cubic-bezier(0, 0.7, 0, 1),
                        stroke-width 0.4s cubic-bezier(0, 0.7, 0, 1);
        }
    }
}


// CURSOR GLOW
.cursor-glow, .cursor-glow-before::before, .cursor-glow-after::after {
    background-image: url("./assets/medias/cursor-glow-onbright.png");
    html[theme="dark"] & { background-image: url("./assets/medias/cursor-glow-ondark.png"); }
    background-repeat: no-repeat;
    background-position: var(--cglow-x, 0) var(--cglow-y, 0);
    background-size: var(--cglow-size, 0);
}
.cursor-glow-before::before, .cursor-glow-after::after {
    z-index: -1;
    content: "";
    position: absolute;
    inset: 0;
    background-color: transparent;
}

// QUICK VIDEO POPUPS
[video-popups-container] {
    position: fixed;
    width: 0;
    height: 0;
    top: 0;
    left: 0;
    overflow: hidden;
    pointer-events: none;
    user-select: none;

    .video-popup {
        --tr-transform: 0.8s cubic-bezier(0.7, 0.7, 0, 1);

        display: flex;
        align-items: center;
        justify-content: center;
        position: fixed;
        width: 0;
        height: 0;
        top: 50%;
        left: 50%;
        &:not(.anim-pre) {
            top: 50% !important;
            left: 50% !important;
        }
        pointer-events: all;
        user-select: none;

        opacity: 1;
        transition: opacity 0.6s,
                    top var(--tr-transform),
                    left var(--tr-transform);

        .bg {
            z-index: -1;
            position: fixed;
            width: 100vw;
            height: 100vh;
            top: 0;
            left: 0;
            background-color: rgba(0, 0, 0, 0.7);
            opacity: 1;
            transition: opacity 0.8s;
        }

        .ytplayer-c {
            position: absolute;
            width: 80vw;
            transform: scale(1);
            opacity: 1;
            transition: opacity 0.3s 0.1s,
                        transform var(--tr-transform);

            .ytplayer {
                background-color: var(--y-fill-main);
                overflow: hidden;

                & > iframe {
                    opacity: 1;
                    transition: opacity 1s 0.55s;
                }

                &::before, &::after {
                    opacity: 1;
                    transition: opacity 0.4s 2s;
                }
            }
        }

        &.anim-pre {
            &, & * { transition: 0s; }

            .bg {
                opacity: 0;
            }
            .ytplayer-c {
                opacity: 0;
                transform: scale(0.2);

                .ytplayer {
                    & > iframe,
                    &::before, &::after {
                        opacity: 0;
                    }
                }
            }
        }

        &.anim-clear {
            opacity: 0;
            transition: opacity 0.8s 0.1s,
                        top var(--tr-transform),
                        left var(--tr-transform);

            .ytplayer-c {
                opacity: 0;
                transform: scale(0.98, 0.90);
                transition: opacity 0.6s,
                            transform 0.8s cubic-bezier(0.2, 0.5, 0, 1);
            }

            &, & * {
                pointer-events: none !important;
            }
        }
    }
}


// YT PLAYER
.ytplayer-c {
    display: flex;
    width: 100%;
    height: 0%;
    transition-property: height;

    .ytplayer {
        position: relative;
        height: 100%;
        top: 0;
        left: 50%;
        border-radius: var(--global-border-radius);
        transform: translate(-50%, -50%);
        transition-property: transform, padding-bottom;

        width: 100%;
        padding-bottom: initial;

        --ratio-size: 100%;
        padding-bottom: min(var(--ratio-size), 90.1vh);

        &[aspect-ratio="16:9"] {
            width: 160vh;
            --ratio-size: 90.1vh;
        }
        &[aspect-ratio="1:1"] {
            width: 90vh;
            --ratio-size: 90.1vh;
        }
        &[aspect-ratio="3:4"] {
            width: 67.5vh;
            --ratio-size: 90.1vh;
        }
        &[aspect-ratio="4:3"] {
            width: 120vh;
            --ratio-size: 90.1vh;
        }

        @media (max-width: $breakpoint--qvp) {
            &[aspect-ratio="16:9"] {
                --ratio-size: 9 / 16 * 100%;
            }
            &[aspect-ratio="1:1"] {
                --ratio-size: 1 / 1 * 100%;
            }
            &[aspect-ratio="3:4"] {
                --ratio-size: 4 / 3 * 100%;
            }
            &[aspect-ratio="4:3"] {
                --ratio-size: 3 / 4 * 100%;
            }
        }

        & > iframe, & > video {
            position: absolute;
             // be sure to cover container
            top: -1px;
            left: -1px;
            width: calc(100% + 2px);
            max-width: calc(100% + 2px);
            height: calc(100% + 2px);
            max-height: calc(100% + 2px);
            //width: 100%;
            //height: 100%;
            border-radius: var(--global-border-radius);
        }
    }
}

// EMBEDS ASPECT RATIO & SIZING
[aspect-ratio]:not(.ytplayer) {
    position: relative;
    @include nice-corners();
    width: var(--width) !important;
    height: calc(var(--width) * var(--ratio)) !important;

    &[aspect-ratio="16:9"] {
        --width: 65vw;
        --ratio: calc(9 / 16);
    }
    &[aspect-ratio="1:1"] {
        flex-shrink: 0;
        --width: 45vw;
        --ratio: 1;
    }
    &[aspect-ratio="3:4"] {
        flex-shrink: 0;
        --width: 34vw;
        --ratio: calc(4 / 3);
    }
    &[aspect-ratio="4:3"] {
        flex-shrink: 0;
        --width: 60vw;
        --ratio: calc(3 / 4);
    }
    &[aspect-ratio="a4-v"] {
        flex-shrink: 0;
        --width: 30vw;
        --ratio: calc(297 / 210);
    }

    @media (max-width: $mini-tablet) {
        width: 100% !important;
        max-height: 85vh;
        padding-bottom: initial;

        --ratio-size: 100%;
        padding-bottom: min(var(--ratio-size), 90.1vh);

        &[aspect-ratio="16:9"] {
            --ratio-size: 9 / 16 * 100%;
        }
        &[aspect-ratio="1:1"] {
            --ratio-size: 1 / 1 * 100%;
        }
        &[aspect-ratio="3:4"] {
            --ratio-size: 4 / 3 * 100%;
        }
        &[aspect-ratio="4:3"] {
            --ratio-size: 3 / 4 * 100%;
        }
        &[aspect-ratio="a4-v"] {
            --ratio-size: 297 / 210 * 100%;
        }
    }

    iframe {
        // display: none; // debug
        position: absolute;
        // be sure to cover container
        top: -1px;
        left: -1px;
        width: calc(100% + 2px);
        height: calc(100% + 2px);
        //width: 100%;
        //height: 100%;
    }
}
@media (max-width: $mini-tablet) {
    :not(.ytplayer) video[aspect-ratio] {
        position: relative;
        padding-bottom: initial !important;
        height: min(var(--ratio-size), 90.1vh) !important;
    }
}


// REUSABLE
// EMBED PLAYER LOADING
.embed-player-loading {
    z-index: -1;
    position: absolute;
    inset: 0;
    pointer-events: none;
    user-select: none;

    @keyframes embedSpawnDelay {
        0% { opacity: 0; }
        100% { opacity: 1; }
    }
    @keyframes embedLoading {
        0% { opacity: 0.125; transform: scale(0.99); }
        100% { opacity: 0.15; transform: scale(0.8); }
    }
    @keyframes embedLoadingLow {
        0% { opacity: 0; transform: scale(0.99); }
        85% { opacity: 0.125; }
        100% { opacity: 0.125; transform: scale(0.95); }
    }

    animation: embedSpawnDelay 0.5s 2s ease both;

    &::before, &::after {
        z-index: -1;
        content: "";
        position: absolute;
        inset: 0;
        opacity: 0.1;
        border-radius: var(--global-border-radius);
        animation: embedLoading 1s cubic-bezier(0.85, 0.05, 0.15, 0.95) alternate infinite;
    }
    &::before {
        background-color: var(--y-txt-main);
        animation-name: embedLoadingLow;
    }
    &::after {
        background-color: var(--y-txt-main);
        animation-name: embedLoading;
    }
}

// EMBED PLAYER LOADING
.embed-player-placeholder {
    z-index: -2;
    position: absolute;
    inset: 0;
    pointer-events: none;
    user-select: none;

    transform: scale(0.999);
    background-color: #000000;
    border-radius: var(--global-border-radius);
}


// filters container
.filters {
    display: inline-block;
    user-select: none;
    pointer-events: all;
}
.no-f .filters {
    pointer-events: none;
}

.project-title {
    display: block;
    font-weight: 500;
}
.thumbnail {
    position: relative;
    overflow: hidden;
    pointer-events: none;
    user-select: none;

    & > img {
        width: 100%;
        min-height: 5em;
        object-fit: contain;
    }
}


// LANDING (TEMPORARY)
.content-sections#landing {
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;

    &, * {
        pointer-events: none;
    }

    .content {
        position: absolute;
        top: 0;
        right: 60%;
        height: 100%;

        > * {
            position: absolute;
            text-align: right;
            white-space: nowrap;
            word-break: keep-all;
            right: 0;
        }
    }

    .head {
        display: flex;
        align-items: flex-end;
        justify-content: center;
        flex-direction: column;
        top: 33%;
        font-size: clamp(12em, 10vw, 15em);
        font-weight: 700;
        letter-spacing: -2px;
    }

    .scroll-down-notice {
        --color: var(--y-txt-main);
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        bottom: 15%;
        font-size: 1.75em;
        pointer-events: all;
        cursor: pointer;

        span {
            color: var(--color);
            letter-spacing: calc(var(--global-letter-spacing) + 0.5px);
            font-weight: var(--global-type-weight);
            transition: font-weight 0.5s ease,
                        letter-spacing 0.5s ease,
                        color 0.5s ease;
        }

        .scroll-down-icon {
            @keyframes updown {
                0% { transform: scaleX(1.15) scaleY(0.85) translateY(0); }
                100% { transform: scaleX(0.9) scaleY(1.1) translateY(0.35em); }
            }
            animation: updown 0.9s cubic-bezier(0.8, 0, 0.2, 1) infinite alternate both;

            svg {
                font-size: 1.75em;
                width: 1em;
                height: 1em;
                fill: none;
                stroke: var(--color);
                stroke-width: 1.75;
                transition: stroke-width 0.5s ease,
                            transform 0.5s ease,
                            stroke 0.5s ease;
            }
        }

        &:hover {
            span {
                letter-spacing: var(--global-letter-spacing);
                font-weight: 750;
                transition: font-weight 0.2s ease,
                            letter-spacing 0.2s ease,
                            color 0.5s ease;
            }

            .scroll-down-icon {
                svg {
                    stroke-width: 5;
                    transform: scaleX(1.2) scaleY(0.9);
                    transition: stroke-width 0.2s ease,
                                transform 0.2s ease,
                                stroke 0.5s ease;
                }
            }
        }
        &:active {
            --color: var(--y-accent-red);

            span {
                letter-spacing: var(--global-letter-spacing);
                font-weight: 750;
                transition: font-weight 0.2s cubic-bezier(0, 0.8, 0, 1),
                            letter-spacing 0.2s cubic-bezier(0, 0.8, 0, 1),
                            color 50ms linear;
            }

            .scroll-down-icon {
                svg {
                    stroke-width: 5;
                    transform: scaleX(0.8) scaleY(1);
                    transition: stroke-width 0.2s cubic-bezier(0, 0.8, 0, 1),
                                transform 0.2s cubic-bezier(0, 0.8, 0, 1),
                                stroke 50ms linear;
                }
            }
        }
    }

    [class^="t-"] {
        position: relative;
        line-height: 0.8;
    }
    .t-yolan {
        color: var(--y-accent-red);

        &::after {
            content: "’";
            position: absolute;
            top: 0;
        }
    }

    .ylogo-container {
        display: flex;
        align-items: center;
        justify-content: center;
        mask: linear-gradient(180deg,
            rgba(0,0,0, 1) 65%,
            rgba(0,0,0, 0.8) 70%,
            rgba(0,0,0, 0.3) 80%,
            rgba(0,0,0, 0.15) 85%,
            rgba(0,0,0, 0) 97.5%);
        mask: linear-gradient(180deg,
            rgba(0,0,0, 1) 45%,
            rgba(0,0,0, 0.8) 57.5%,
            rgba(0,0,0, 0.2) 75%,
            rgba(0,0,0, 0.075) 80%,
            rgba(0,0,0, 0) 90%);
    }

    .ylogo-container,
    [class^="y-logo"] {
        z-index: -1;
        position: absolute;
        box-sizing: border-box;
        width: 100%;
        height: 160vh;
    }
    .y-logo {
        padding-left: 35%;
        // fill: rgb(var(--y-accent-red-v), 0.5);
        fill: rgb(50, 50, 50);
        fill: var(--y-accent-red);
        opacity: 0.25;
    }
    .y-logo-bgimg,
    .y-logo-pattern {
        background-color: var(--y-accent-red);
        background-color: transparent;

        opacity: 0;
        transition: opacity 0.6s cubic-bezier(0.4, 0.7, 0, 1);

        &.color {
            background-color: rgba(var(--y-accent-red-v), 0.075);
            opacity: 1 !important;
            pointer-events: none;
        }
    }
    .y-logo-bgimg {
        mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.93 24"><path d="M0,0l4.9,11l2.82,13l3.99-10.38l1-2.61l4.22-11l-7.7,7.04L0,0z M4.87,6.16L7.69,8.3L6.01,8.72L4.87,6.16z M8.24,17.22l-1.2-5.54l5.13-4.69L8.24,17.22z"/></svg>')
              0/100% 100%;
        mask-position: 8.6em 0;
        mask-repeat: no-repeat;
    }
    .y-logo-pattern {
        mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.93 24"><path d="M16.93,0L9.26,7L0.03,0l4.86,10.98L7.7,24L16.93,0z M12.29,6.76L8.21,17.47l-1.33-5.82L12.29,6.76z"/></svg>')
              0/33% 15%;
        mask-repeat: repeat-y;
        pointer-events: all;

        --cglow-size: 150rem !important;

        &:hover {
            opacity: 0.2;
            html[theme="light"] & { opacity: 0.5; }

            & ~ .y-logo-bgimg {
                opacity: 1;
            }
        }
    }

    @media (max-width: $mini-tablet) {
        .content {
            display: flex;
            align-items: center;
            justify-content: center;
            right: 50%;

            > * {
                right: initial;
            }
        }
        .scroll-down-notice {
            bottom: 17.5%;
        }


        .ylogo-container,
        [class^="y-logo"] {
            left: -15%;
            width: 135%;
            height: 160vh;
        }
        .y-logo-pattern {
            left: 10%;
        }
        .y-logo-bgimg {
            display: none;
        }
    }

    html.isTouch & {
        .y-logo-pattern {
            background-image: none !important;
            background-color: var(--y-txt-main) !important;
            opacity: 0.035 !important;
        }
    }
}


// RECENT PROJECTS SLIDES
.content-sections#recent-projects {
    overflow: hidden;
    --col1-w: calc(100% * (3 / 7));
    --recent-slides-p: 0 var(--plist-p) var(--plist-p2) 0;
    --thumbnail-height : calc(100vh * (2 / 3));

    &, * {
        pointer-events: none;
    }
    // .recent-slides,
    .goto_filters-txt,
    .recent-slides .bg-slide,
    .filters > * {
        cursor: pointer;
        pointer-events: all;
    }

    .col1, .col2 {
        position: absolute;

    }
    .col1 {
        z-index: 2;
        top: 0;
        left: 0;
        width: var(--col1-w);
        height: 100%;
        //background-color: rgba(0,0,0,0.3);
    }
    .col2 {
        z-index: 1;
        top: 0;
        right: 0;
        width: 100%;
        height: auto;

        .in {
            position: relative;
            left: var(--col1-w);
            width: calc(100% - var(--col1-w));
        }
    }

    .pattern-bg {
        position: absolute;
        opacity: 0.15;
        background-position: calc(var(--start-x) + (var(--scroll-pos-y) * var(--speed-factor))) 0;
    }

    #intro-rp {
        font-size: 2.5em;

        .in {
            padding: var(--plist-p);
            box-sizing: border-box;

            &.sticky-fixed {
                width: inherit;
            }
            &:not(.sticky-fixed) {
                width: 100%;
            }
        }

        .title-recent {
            font-size: clamp(2.5em, 5vw, 4em);
            pointer-events: none;
        }

        .goto_filters-txt {
            display: inline-flex;
            align-items: center;
            margin-top: 2.5em;
            font-size: 0.9em;
            font-weight: var(--global-type-weight);
            letter-spacing: var(--global-letter-spacing);
            cursor: pointer;
            user-select: none;
            transition: font-weight 0.6s cubic-bezier(0.35, 0.5, 0, 1),
                        letter-spacing 0.6s cubic-bezier(0.3, 0.5, 0, 1);

            .arrow-right {
                overflow: visible;
                position: relative;
                left: 0.2em;
                height: 0.85em;
                fill: none;
                stroke-width: 2.6;
                stroke: var(--y-txt-main);
                transition: stroke-width 0.6s cubic-bezier(0.3, 0.6, 0, 1),
                            transform 0.55s cubic-bezier(0.3, 0.7, 0, 1);
            }

            &:hover {
                font-weight: 800;
                letter-spacing: calc(var(--global-letter-spacing) - 0.4px);
                transition: font-weight 0.4s cubic-bezier(0.35, 0.4, 0, 1),
                            letter-spacing 0.4s cubic-bezier(0.4, 0.4, 0, 1);

                .arrow-right {
                    stroke-width: 6.5;
                    transform: translateX(0.45em);
                    transition: stroke-width 0.5s cubic-bezier(0.3, 0.6, 0, 1),
                                transform 0.4s cubic-bezier(0.2, 0.6, 0, 1);
                }
            }
            &:hover:active {
                .arrow-right {
                    transform: translateX(0.15em);
                    transition: stroke-width 0.5s cubic-bezier(0.3, 0.6, 0, 1),
                                transform 0.3s cubic-bezier(0, 0.7, 0, 1);
                }
            }
        }
    }

    #recent-projects-slides {
        z-index: 1;
        position: relative;
        // transition: transform var(--scroll-quick-tr);

        .recent-slides {
            position: relative;
            width: 100%;
            font-size: 1.75em;
            background-color: var(--project-color-fill);
            cursor: default !important;

            &::before {
                z-index: -11;
            }
            &::after {
                z-index: -10;
                content: "";
                position: absolute;
                inset: 0;
                background-color: var(--project-color-fill);
                opacity: 0.35;
            }

            .in {
                height: inherit;
            }

            .bg-slide {
                z-index: -10;
                position: absolute;
                inset: 0;
                // filter: grayscale(1) brightness(0.35);
            }

            .thumbnail {
                height: var(--thumbnail-height);
                max-height: var(--thumbnail-height);
                mask: linear-gradient(180deg,
                    // rgba(0,0,0, 0.2) 0%,
                    // rgba(0,0,0, 0.65) 7.5%,
                    // rgba(0,0,0, 0.9) 12.5%,
                    // rgba(0,0,0, 1) 17.5%,
                    rgba(0,0,0, 1) 60%,
                    rgba(0,0,0, 0.9) 65%,
                    rgba(0,0,0, 0.6) 80%,
                    rgba(0,0,0, 0.1) 100%);

                & img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                }

                > * {
                    transform: scale(1);
                    opacity: 1;
                    transition: transform 0.8s cubic-bezier(0.1, 0.65, 0, 1),
                                opacity 0.3s cubic-bezier(0.1, 0.6, 0, 1);
                }
            }

            .data {
                padding: var(--recent-slides-p);
                box-sizing: border-box;
            }

            .project-title {
                display: block;
                margin: 0.4em 0 0.3em;
                font-size: clamp(2em, 4vw, 3em);
                font-weight: 550;
                user-select: none;
            }


            .in:hover {
                .thumbnail {
                    > * {
                        transform: scale(1.05);
                        opacity: 0.8;
                        transition: transform 0.5s cubic-bezier(0.05, 0.6, 0, 1),
                                    opacity 0.3s cubic-bezier(0.1, 0.7, 0, 1);
                    }
                }
            }
        }
    }

    @media (max-width: $breakpoint--recents) {
        --recent-slides-p: 0 var(--plist-p) var(--plist-p2) var(--plist-p);
        --thumbnail-height : calc(100vh * (1 / 3));

        .col1 {
            position: relative;
            width: 100%;
            height: auto;

            .in {
                position: relative !important;
                top: 0;
                left: 0;
            }
        }
        .col2 {
            width: 100%;

            .in {
                left: 0;
                width: 100%;
            }
        }

        .goto_filters-txt {
            margin: var(--plist-p2) 0 var(--plist-p) !important;
        }
    }
}


// FILTERS
.content-sections#filters {
    #intro-filters {
        z-index: 1;
        position: relative;
        width: 100%;
        height: 100vh;
        pointer-events: none;

        .in {
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            position: absolute;
            box-sizing: border-box;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            padding: 0 var(--plist-p);
            text-align: left;
            font-size: 2em;
            transition: font-size var(--scroll-quick-tr);

            //&.sticky-end { // projects-list snapping
            //    font-size: 1.7em;
            //}

            .title-filters {
                padding-bottom: 0.25em;
                font-size: clamp(2.5em, 5vw, 3.5em);
            }

            .filters-selector {
                display: flex;
                flex-direction: column;
                width: 100%;
                padding-top: 1.75em;
                user-select: none;

                font-size: clamp(0.875em, 1.3vw, 0.9em);

                .prj-pill {
                    pointer-events: all;
                    --margin-sides-add: 0.1em;

                    @media (max-width: $mini-tablet) {
                        --margin-space-add: 0.05em;
                        --margin-sides-add: 0.125em;
                    }
                    @media (max-width: $mini-mobile) {
                        --margin-sides-add: 0.175em;
                        padding: 0.5em 1em;
                    }
                }

                .secondary {
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    justify-content: space-between;
                    margin-top: 0.65em;
                    font-size: 1em;
                    overflow: hidden;

                    & .animate {
                        height: 100%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        transform: translateY(0);
                        transition: transform 0.6s cubic-bezier(0.15, 0.5, 0, 1);
                    }
                    &.hidden {
                        .animate {
                            transform: translateY(-100%);
                            transition: transform 0.75s cubic-bezier(0.45, 0, 0, 1);
                            transition-delay: 0s !important;
                        }
                    }
                }

                .clear-filters-button {
                    --pill-bg: var(--y-txt-main);
                    --pill-c: var(--y-fill-secondary);
                }

                .filter-projects-number {
                    margin-left: 0.25em;
                    font-size: 1em;
                    font-weight: var(--global-type-weight);
                    letter-spacing: calc(var(--global-letter-spacing) - 0.1px);
                    pointer-events: none;
                    & > * {
                        opacity: 0.5;
                    }

                    [anim-count] {
                        display: inline-block;
                        font-feature-settings: "tnum"; // mono-space numbers
                        letter-spacing: calc(var(--global-letter-spacing) - 1.5px);
                        margin-right: 0;
                        padding-right: 0.3em; // space

                        &, & ~ * {
                            transition: opacity 0.5s ease, color 0.5s ease,
                                        font-weight 0.4s cubic-bezier(0.35, 0.4, 0, 1),
                                        margin-right 0.7s cubic-bezier(0.25, 0.7, 0, 1);
                        }

                        &.counting {
                            margin-right: 0.15em;
                            font-weight: 600;
                            opacity: 1;
                            color: var(--y-accent-red);
                            color: var(--y-txt-main);
                            transition: opacity 0.5s ease, color 0.5s ease,
                                        font-weight 0.4s cubic-bezier(0.35, 0.4, 0, 1),
                                        letter-spacing 0.4s cubic-bezier(0.35, 0.4, 0, 1),
                                        margin-right 0.5s cubic-bezier(0.2, 0.6, 0, 1);
                        }
                        &.none {
                            @keyframes none-count {
                                0% { transform: translateX(0em); }
                                    6% { transform: translateX(-0.25em); }
                                        13% { transform: translateX(0.075em); }
                                    20% { transform: translateX(-0.15em); }
                                        35% { transform: translateX(0.05em); }
                                    60% { transform: translateX(-0.025em); }
                                        80% { transform: translateX(0.005em); }
                                100% { transform: translateX(0em); }
                            }
                            animation: none-count 1.75s 0s ease;
                            transform: translateX(0);
                            margin-right: 0.06em;
                            font-weight: 550;
                            letter-spacing: var(--global-letter-spacing);
                            opacity: 0.75;

                            &, & ~ * {
                                color: #ff2727;
                            }
                            & ~ * {
                                font-weight: 550;
                                letter-spacing: calc(var(--global-letter-spacing) - 0.25px);
                            }
                        }
                    }
                }
            }
        }
    }

    #projects-list {
        position: relative;
        padding: var(--plist-p);
        padding-top: var(--plist-ptop);
        padding-bottom: var(--plist-pbottom);
        width: 100%;
        box-sizing: border-box;
        transition: height 0.6s cubic-bezier(0.2, 0.65, 0, 1);

        .ice-scroll {
            transform: translateY(calc(var(--ice-scroll-offset, 0) / 2));
            transition: transform var(--scroll-plist);
        }

        .projects-list {
            position: relative;
            top: 0;
            left: 0;
            width: 100%;
            transition: opacity 0.35s ease,
                        transform 1.2s cubic-bezier(0.3, 0.7, 0, 1);
        }

        [column-group] {
            position: relative;
            top: 0;
            left: 0;
            // display: flex;
            // flex-direction: row;
            display: grid;
            grid-auto-rows: minmax(min-content, max-content);

            &.hidden, &[column-group="1"] {
                display: none;
                position: absolute;
            }
        }
        [column] {
            display: flex;
            flex-direction: column;
            //flex: 1;
            box-sizing: border-box;

            &:not(:last-child) { padding-right: 2.5em; }
            transition: transform var(--scroll-plist);

            @media (pointer: fine) { // only on pc
                & {
                    transform: translateY(calc(var(--ice-scroll-offset, 0) / 3));
                }
                &:nth-child(2n+2) {
                    transform: translateY(var(--ice-scroll-offset, 0));

                    .isChr & {
                        transform: translateY(calc(var(--ice-scroll-offset, 0) * 1.75));
                    }
                }
            }
        }

        .project-cards {
            display: flex;
            flex-direction: column;
            position: relative;
            width: 100%;
            font-size: clamp(1.2em, 1.5vw, 1.4em);
            margin-bottom: 4em;
            box-sizing: border-box;
            user-select: none;

            .in {
                > * {
                    pointer-events: none;
                }
                &, .video-quick-popup-button .button {
                    pointer-events: all;
                    cursor: pointer;
                }
            }

            > .bg-card {
                @include nice-corners();
                z-index: -10;
                position: absolute;
                inset: -0.2em;
                outline: 2px solid transparent;
                opacity: 1;
                transform: rotateZ(0.01deg);
                transition: inset 0.4s cubic-bezier(0.7, 0.7, 0, 1),
                            outline-color 0.35s cubic-bezier(0.6, 0.4, 0, 1);

                &::after {
                    content: "";
                    position: absolute;
                    inset: 0;
                    background-color: var(--project-color-accent, transparent);
                    opacity: 0;
                    transition: opacity 0.5s cubic-bezier(0.4, 0.6, 0, 1);
                }
                &::before {
                    content: "";
                    position: absolute;
                    inset: 0;
                    background-color: transparent;
                    opacity: 0;
                    transition: opacity 0.3s linear;
                }
            }

            .thumbnail {
                > * {
                    border-radius: 2px;
                    transform: scale(1);
                    opacity: 1;
                    transition: transform 0.8s cubic-bezier(0.1, 0.65, 0, 1),
                                opacity 0.3s cubic-bezier(0.1, 0.6, 0, 1);
                }
            }

            .header {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                font-size: clamp(1.625em, 1.5vw, 1.65em);
                margin: 0.45em 0 0.35em;
            }

            .project-title {
                font-size: 1em;
                font-weight: 650;
                line-height: 1.25;
                position: relative;
                display: inline-block;
            }

            .video-quick-popup-button {
                --size: 1.35em;
                flex-shrink: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;

                .width {
                    position: relative;
                    width: var(--size);
                    height: 1em;
                    margin-left: 0.33em;
                    pointer-events: none;
                    user-select: none;
                }
                .button {
                    position: absolute;
                    width: var(--size);
                    height: var(--size);
                    border-radius: 50%;
                    overflow: hidden;
                    cursor: pointer;

                    transform: scale(1);
                    transition: 0.6s cubic-bezier(0.15, 0.7, 0, 1);

                    & > * {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                    }

                    .bg {
                        background-color: var(--y-txt-main);
                    }

                    .arrow {
                        fill: var(--y-fill-main);
                        transform: scale(0.5);
                        transition: transform 0.8s cubic-bezier(0.5, 0.7, 0, 1);
                    }
                    .bg::after {
                        content: "";
                        position: absolute;
                        width: 50%;
                        height: 50%;
                        top: 50%;
                        left: 50%;
                        border-radius: 50%;
                        background-color: var(--y-fill-main);
                        transform: translate(-50%, -50%) scale(0);
                        transform-origin: 40% 50%;
                        transition: transform 0.8s cubic-bezier(0.1, 0.7, 0, 1);
                    }

                    &:hover {
                        transform: scale(1.2);
                        border-radius: 25%;
                        transition: 0.7s cubic-bezier(0.05, 0.7, 0, 1);

                        .arrow {
                            transform: scale(0.2);
                        }
                        .bg::after {
                            transform: translate(-50%, -50%) scale(1);
                        }
                    }
                }
            }

            .filters {
                .prj-pill {
                    --margin-space-add: -0.1em;
                    --margin-sides-add: -0.05em;
                    --outline-weight: 1px;

                    @media (max-width: $mini-tablet) {
                        --margin-space-add: 0em;
                        --margin-sides-add: 0em;
                    }
                }
            }


            .in:hover {
                ~ .bg-card {
                    transform: rotateZ(0deg);
                    inset: -0.8em;
                    outline-color: var(--project-color-accent, var(--y-txt-main));
                    transition: inset 0.6s cubic-bezier(0.05, 0.5, 0, 1),
                                outline-color 0.2s ease;

                    &::after, &::before {
                        transition: opacity 0.3s cubic-bezier(0.1, 0.7, 0, 1);
                    }
                    &::after {
                        opacity: 0.35;
                    }
                    &::before {
                        opacity: 0.65;
                    }

                }

                .thumbnail {
                    > * {
                        transform: scale(0.95);
                        opacity: 0.8;
                        transition: transform 0.5s cubic-bezier(0.05, 0.6, 0, 1),
                                    opacity 0.3s cubic-bezier(0.1, 0.7, 0, 1);
                    }
                }
            }
            .in:active {
                ~ .bg-card {
                    inset: -0.5em;
                    outline-color: var(--project-color-accent, var(--y-txt-main));

                    &::after {
                        opacity: 0.2;
                    }
                }

                .thumbnail {
                    > * {
                        transform: scale(0.935);
                    }
                }
            }
            .in:hover:active {
                ~ .bg-card {
                    inset: -1em;
                    outline-color: var(--y-txt-main);
                    transition: inset 0.1s cubic-bezier(0, 0.6, 0, 1),
                                outline-color 0s linear;

                    &::after {
                        opacity: 0.575;
                        transition: opacity 0.2s cubic-bezier(0.05, 0.7, 0, 1);
                    }
                }

                .thumbnail {
                    > * {
                        transform: scale(0.88);
                        transition: transform 0.1s cubic-bezier(0, 0.7, 0, 1),
                                    opacity 0.3s cubic-bezier(0.1, 0.7, 0, 1);
                    }
                }
            }
        }

        .nothing-found {
            user-select: none;
            pointer-events: none;
            font-weight: var(--global-type-weight);
            letter-spacing: var(--global-letter-spacing);
            opacity: 0.4;
            transition: opacity 2s cubic-bezier(0.4, 0.4, 0, 1),
                        transform var(--scroll-plist);

            .content-container {
                padding: 5rem 0 12rem;
            }

            .title {
                display: inline-block;
                font-size: 5em;
                font-weight: inherit;
                margin-bottom: 0.4em;
                opacity: 1;
                transform: translate(0);
                transition: opacity 0.4s ease,
                            color 0.6s ease,
                            transform 1.5s cubic-bezier(0.2, 0.7, 0, 1),
                            font-weight 1.5s cubic-bezier(0.2, 0.7, 0, 1);
            }

            .txt {
                font-size: 2em;
                line-height: 1.25;

                .words {
                    display: inline-block;
                    opacity: 1;
                    transform: translate(0);
                    transition: opacity 0.4s ease,
                                transform 1s cubic-bezier(0.35, 0.5, 0, 1);
                }
            }
        }

        // animations
        .project-cards {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.4s ease,
                        transform 1.2s cubic-bezier(0.3, 0.6, 0, 1);
        }

        .anim-pre {
            .project-cards {
                opacity: 0;
                transform: translateY(20rem);
            }
            &.nothing-found {
                opacity: 1;

                .title, .words {
                    opacity: 0;
                    transform: translateY(1em);
                }
                .title {
                    font-weight: 999;
                    color: var(--y-accent-red);
                }
            }
        }
        .anim-clear {
            position: absolute;
            box-sizing: border-box;
            padding: inherit;
            opacity: 0;
            transform: translateY(-5rem) scaleY(0.935);
            transform-origin: top;
            pointer-events: none;
        }
    }
}


// PROJECT FILES
[project-files-container] {
    position: fixed;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    pointer-events: none;
    user-select: text;

    .project-files {
        --file-padding-topbottom: clamp(6rem, 5.5vw, 10rem);
        --file-padding-sides: clamp(1vw, 8vw, 7.5vw);
        --width-main: 77.5%;
        --header-ptitle-size: clamp(2.35rem, 3.5vw, 5rem);
        --header-line-height: 1.2;
        --margin-sep: clamp(1rem, 2vw, 2.25rem);

        --text-padding-topbottom: 1.2rem;
        --text-padding-sides: 1.75rem;
        --text-padding-sides-big: 3.5rem;
        --paragraphe-spacing: 2.25em;
        --text-color: var(--y-txt-main);

        --img-max-height: 95vh;

        position: absolute;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        background-color: var(--y-fill-main);
        pointer-events: all;

        ::selection {
            color: white;
            background-color: var(--project-color-accent);
        }

        [boom-container] {
            z-index: -1;
        }

        img {
            user-select: none;
            pointer-events: none;
        }

        .separator-line {
            position: relative;
            width: 100%;
            height: 2px;
            top: 0;
            left: 0;
            margin: var(--margin-sep) 0;
            background-color: var(--project-color-accent, transparent);
        }

        .embed-player-placeholder {
            background-color: var(--project-color-fill);
        }
        // .project-main .embed-player-placeholder {
        //     background-color: #000000;
        // }

        .prj-pill[context-id], .desc-link {
            --accent: var(--project-color-accent);
        }

        .file {
            display: block;
            //display: flex;
            //flex-direction: column;
            position: relative;
            width: 100%;
            height: 0; // to allow scrolling
            top: 0;
            left: 0;
            padding: 0 var(--file-padding-sides);

            font-size: 1.8em;

            &, * { box-sizing: border-box; }
            img { user-select: none; }

            .head-buttons {
                z-index: 10;
                display: flex;
                justify-content: flex-end;
                flex-direction: row-reverse;
                padding-left: clamp(1rem, 2vw, 2rem);
                user-select: none;

                --buttons-size: calc(1em * var(--header-line-height));
                --buttons-scale: 65%;
                > * {
                    flex-grow: 0;
                    flex-shrink: 0;
                    position: relative;
                    cursor: pointer;
                    width: var(--buttons-size);
                    height: var(--buttons-size);

                    &:not(:last-child) {
                        margin-left: 0.25em;

                        @media (max-width: $mini-tablet) {
                            margin-left: 0.5em;
                        }
                    }
                }
            }
            .close-file-button {
                display: flex;
                align-items: center;
                justify-content: center;

                svg {
                    position: relative;
                    width: var(--buttons-scale);
                    height: var(--buttons-scale);
                    fill: none;
                    stroke-width: 1.75;
                    stroke: var(--y-txt-main);
                    transform: rotateZ(0.01deg) scale(1);
                    transition: stroke-width 0.6s cubic-bezier(0.1, 0.6, 0, 1),
                                stroke 0.5s ease,
                                transform 0.6s cubic-bezier(0.1, 0.6, 0, 1);
                    overflow: visible;
                }

                &:hover {
                    svg {
                        stroke-width: 5.5;
                    }
                }
                &:active {
                    svg {
                        // stroke-width: 3;
                        stroke-width: 5.5;
                        stroke: var(--project-color-accent);
                        transform: rotateZ(0.01deg) scale(0.9);
                        transition: stroke-width 0.2s cubic-bezier(0, 0.6, 0, 1),
                                    stroke 0s,
                                    transform 75ms cubic-bezier(0, 0.7, 0, 1);
                    }
                }
            }

            .change-language-button {
            }

            .head {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                flex-direction: row;
                position: relative;
                width: 100%;
                padding-top: var(--file-padding-topbottom);
                font-size: var(--header-ptitle-size);
                line-height: var(--header-line-height);
            }

            .title-container {
                flex-grow: 1;
                z-index: 2;
                position: relative;
                line-height: inherit;

                .project-title {
                    font-weight: 550;
                    line-height: inherit;
                    pointer-events: all;
                    user-select: text;
                }
            }

            .project-container {
                .main, .secondary {
                    position: relative;
                    height: 100%;
                    user-select: none;

                    img {
                        display: block;
                        width: auto;
                        height: 100%;
                        object-fit: contain;
                    }
                }
            }

            .project-main-container {
                z-index: 1;
                display: flex;
                position: relative;
                left: 0;
                width: 100%;
                //height: 100%;
                //height: calc(80vh - (var(--file-padding-topbottom) + (var(--header-ptitle-size) * var(--title-lineH)) + var(--header-ptitle-margin-bottom)));

                &.has-secondary-content {
                    margin-bottom: var(--paragraphe-spacing);
                }
                &.has-secondary-content-same-ratio {
                    .project-main {
                        border-bottom-right-radius: 0;
                        border-bottom-left-radius: 0;
                        margin-bottom: 0;
                    }
                }

                .project-main {
                    flex-shrink: 0;
                    user-select: none;
                    @include nice-corners();
                }

                &[project-type="img"] .project-main {
                    max-width: var(--width-main);
                    //max-height: 110vh;
                    object-fit: contain;
                    background-position: center;
                    background-size: contain;
                    background-repeat: no-repeat;
                }
                &[project-type="yt"] .project-main,
                &[project-type="embed"] .project-main {
                    position: relative;
                    height: 90vh;
                }

                &[project-type="img"] .project-main[aspect-ratio="1:1"] {
                    width: auto !important;
                }
                &[project-type="img"] .project-main[aspect-ratio="1:1"] {
                    width: auto !important;
                }

                .sticky-fssb { // TODO move elsewhere
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                }
                .data-container {
                    position: relative;
                    flex-grow: 0;
                    width: var(--width-main);

                    > * {
                        padding: 0 var(--text-padding-sides);

                        > *:not(:first-child) {
                            margin-top: 0.5em;
                        }
                    }

                    .top {
                        position: relative;
                        right: 0;
                        width: 100%;
                        padding-top: 0.75rem;
                    }
                    .bottom {
                        bottom: 0;
                        padding-top: 1em;

                        &:not(.no-content) {
                            padding-bottom: var(--text-padding-topbottom);
                        }
                    }

                    .contexts, .filters {
                        user-select: none;
                    }

                    .date, .catchphrase {
                        font-weight: var(--global-type-weight);
                        letter-spacing: var(--global-letter-spacing);
                    }
                    .date {
                        // opacity: 0.6;
                        color: rgba(var(--y-txt-main-v), 0.6);
                        letter-spacing: calc(var(--global-letter-spacing) - 1px);
                        font-feature-settings: "tnum";
                        padding-top: .15em;
                        // user-select: none;
                    }
                }
            }

            // .project-secondary-container {
            //     [project-secondary-id]:only-child {
            //         @include nice-corners();
            //     }
            // }

            // img + comment
            .project-secondary-container,
            .desc-content {
                [project-secondary-id] {
                    margin: 0;
                    padding: 0;
                }
                [project-secondary-id],
                > .desc-media[type="img"] {
                    display: flex;
                    flex-direction: row;

                    img {
                        object-fit: contain;
                    }
                }
                .comment, .desc-media > media-caption {
                    padding: var(--text-padding-topbottom) var(--text-padding-sides);
                }
                .comment, media-caption {
                    display: inline-block;
                    flex-shrink: 0;
                    // opacity: 0.5;
                    --text-color: rgba(var(--y-txt-main-v), 0.5);
                    color: var(--text-color);
                    font-weight: 500;
                }
            }

            .description {
                padding-top: clamp(5rem, 6vw, 8rem);
                font-weight: var(--global-type-weight);
                letter-spacing: var(--global-letter-spacing);

                filler {
                    display: block;
                    position: relative;
                    height: 1500px; // TEMP
                }

                .head-top {
                    position: absolute;
                    inset: 0;
                    overflow: hidden; // WHY ARE FIXED ELEMENTS IGNORING THIS

                    .head {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                    }
                }

                // description content
                .desc-content {
                    line-height: 1.4;

                    * {
                        color: var(--text-color);
                    }

                    > * {
                        box-sizing: border-box;
                        margin-bottom: var(--paragraphe-spacing);
                    }

                    h2, h3 {
                        margin: 0;
                        padding: 0;
                        font-family: "Plus Jakarta Sans", "Montserrat" sans-serif;
                        font-weight: 700;
                        letter-spacing: 0.3px;
                        line-height: 1.2;
                    }
                    h2 {
                        font-size: 1.85em;
                        line-height: 1.05;
                        &:not(:first-child) { margin-top: 1.25em; }
                        margin-bottom: 0.35em;
                    }
                    h3 {
                        font-size: 1.15em;
                        &:not(:first-child) { margin-top: 0.85em; }
                        margin-bottom: 0.2em;
                    }
                    p {
                        margin-bottom: 0.6em;
                        // white-space: pre-line;

                        & + .desc-media {
                            margin-top: var(--paragraphe-spacing);
                        }
                    }

                    a:not(.desc-link) {
                        color: var(--project-color-accent);
                        // background-color: var(--bw-theme);
                        text-decoration: underline;
                        text-decoration-color: var(--text-color, var(--y-txt-main));

                        &:hover {
                            color: var(--y-white);
                            background-color: var(--project-color-accent);
                            text-decoration: none;
                        }
                    }
                    .desc-link {
                        font-size: 1.1em;
                        margin-top: var(--text-padding-topbottom);
                    }

                    // [text-part="true"] {
                    //     padding: var(--text-padding-topbottom) var(--text-padding-sides);
                    // }

                    > *:not(.width_fill):not([size-fill]), .width_main {
                        max-width: var(--width-main);
                    }
                    > *.width_fill {
                        width: 100%;
                        max-width: 100%;
                    }
                    > *.width_ignore {
                        width: initial;
                        max-width: 100%;
                    }

                    .desc-media {
                        display: flex;
                        max-height: 95vh;

                        > img {
                            @include nice-corners();
                        }
                    }

                    .even, .row {
                        position: relative;
                        display: flex;
                        flex-direction: row;

                        &.img_ratio {
                            > *:first-child {
                                flex: initial;
                                flex-shrink: 0;
                            }
                        }

                    }
                    .even {
                        > * {
                            position: relative;
                            flex: 1;

                            img {
                                width: 100%;
                            }
                        }
                    }

                    .topbottom {
                        display: flex;
                        flex-direction: column;
                        justify-content: space-between;
                        height: 100%;

                        > *:first-child {
                            top: 0;

                            > *:not(.desc-media):first-child {
                                padding-top: var(--text-padding-topbottom);
                            }
                        }
                        > *:last-child {
                            bottom: 0;

                            > *:not(.desc-media):last-child {
                                padding-bottom: var(--text-padding-topbottom);
                            }
                        }

                        &:last-child > * {
                            padding-left: var(--text-padding-sides);
                        }
                        &:first-child > * {
                            padding-right: var(--text-padding-sides);
                        }
                    }

                    .stack {
                        display: flex;
                        flex-direction: column;

                        > * {
                            padding-left: 0;
                        }
                    }

                    .gap, .row {
                        > * {
                            &:not(:last-child) { margin-right: var(--text-padding-sides); }
                        }
                    }
                    .gap_big {
                        > * {
                            &:not(:last-child) { margin-right: var(--text-padding-sides-big); }
                        }
                    }

                    .center {
                        h2 {
                            transform: translateY(-0.1em);
                        }
                        align-items: center;
                    }
                }
            }

            & > *:last-child {
                padding-bottom: clamp(12rem, 13vw, 22rem);
            }
        }

        opacity: 1;
        transform: scale(1);
        transition: opacity 0.4s,
                    transform 0.7s cubic-bezier(0.3, 0.7, 0, 1);

        .file {
            transition: opacity 1.5s cubic-bezier(0.3, 0.7, 0, 1);
        }
        .pattern-bg {
            transition: opacity 1.5s 0.3s ease;
        }

        &.anim-pre {
            opacity: 0;
            transform: scale(0.3);
        }
        &.anim-pre-content {
            .file,
            .pattern-bg {
                opacity: 0;
            }
        }

        &.anim-clear {
            opacity: 0;
            transition: opacity 0.4s;
            pointer-events: none !important;
        }
        &.anim-clear-content {
            .file,
            .pattern-bg {
                opacity: 0;
                transition: opacity 0.4s;
            }
        }



        @media (max-width: $mini-tablet) {
            --width-main: 100%;
            --file-padding-sides: var(--plist-p2);

            --img-max-height: 85vh;

            img {
                max-width: 100%;
                height: auto !important;
                max-height: var(--img-max-height);
            }

            .file {
                [class*="sticky"] {
                    > * {
                        position: relative !important;
                        top: initial !important;
                        left: initial !important;
                    }
                }

                .project-main-container {
                    flex-direction: column-reverse;

                    .data-container {
                        .top , .bottom {
                            padding-left: 0;
                            width: 100% !important;
                        }
                        .top {
                            padding-top: 0;
                            padding-bottom: var(--text-padding-topbottom);
                        }
                    }
                }

                .project-secondary-container,
                .desc-content {
                    [project-secondary-id],
                    > .desc-media[type="img"] {
                        flex-direction: column !important;
                    }
                    .comment, .desc-media > media-caption {
                        padding-left: 0;
                    }
                }
            }
        }
        @media (max-width: $mini-mobile) {
            --file-padding-sides: var(--plist-p);

            .file {
                .head-buttons {
                    --buttons-scale: 75%;
                }

                .description {
                    *:not(.prj-pill) {
                        margin-left: 0 !important;
                        padding-left: 0 !important;
                    }

                    .even, .row {
                        flex-direction: column !important;

                        &.center {
                            align-items: flex-start !important;
                        }
                    }
                    .gap, .row {
                        > * {
                            &:not(:last-child) {
                                margin-right: 0 !important;
                                margin-bottom: var(--text-padding-sides);
                            }
                        }
                    }
                    .gap_big {
                        > * {
                            &:not(:last-child) {
                                margin-right: 0 !important;
                                margin-bottom: var(--text-padding-sides-big);
                            }
                        }
                    }
                    .topbottom.end-caption {
                        flex-direction: column-reverse !important;

                        > *:first-child {
                            > *:not(.desc-media):last-child {
                                padding-bottom: var(--text-padding-topbottom);
                            }
                        }
                        > *:last-child {
                            > *:not(.desc-media):last-child {
                                padding-bottom: 0;
                            }
                            > *:not(.desc-media):first-child {
                                padding-top: var(--text-padding-topbottom);
                            }
                        }
                    }
                }
            }
        }
    }
}